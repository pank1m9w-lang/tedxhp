---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import BottomNav from '../components/BottomNav.astro';
---

<BaseLayout
  title="TEDx Tsushima Youth 2025 - ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒ—ãƒ©ãƒ³"
  description="TEDx Tsushima Youth 2025ã®ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒ—ãƒ©ãƒ³ã®ã”æ¡ˆå†…ã€‚åœ°åŸŸã®é«˜æ ¡ç”Ÿãƒ»è‹¥è€…ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ä¸€ç·’ã«æ”¯æ´ã—ã¾ã›ã‚“ã‹ã€‚"
>
  <Header />

  <main class="sponsor-page">
    <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section class="sponsor-hero">
      <div class="container">
        <h1 class="hero-title">SPONSORSHIP PLAN</h1>
        <p class="hero-subtitle">ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒ—ãƒ©ãƒ³ã®ã”æ¡ˆå†…</p>
        <p class="hero-theme">Roots for Well-being, Innovation</p>
        <p class="hero-description">
          TEDx Tsushima Youthã¯å®Œå…¨ã«éå–¶åˆ©ã§é–‹å‚¬ã•ã‚Œã€é‹å–¶ãƒ»ç™»å£‡è€…ã‚µãƒãƒ¼ãƒˆã¯ã™ã¹ã¦ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢ã«ã‚ˆã£ã¦æ”¯ãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚<br>
          ãã®ãŸã‚ã€ã‚¤ãƒ™ãƒ³ãƒˆã®é‹å–¶è²»ãƒ»è£…é£¾ãƒ»é«˜æ ¡ç”Ÿã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼æ”¯æ´ãƒ»ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ãªã©ã€çš†ã•ã¾ã‹ã‚‰ã®ã”æ”¯æ´ã«ã‚ˆã£ã¦æˆã‚Šç«‹ã£ã¦ã„ã¾ã™ã€‚
        </p>
        <a href="#apply" class="cta-button">æ”¯æ´ç”³ã—è¾¼ã¿ã¯ã“ã¡ã‚‰</a>
      </div>
    </section>

    <!-- TEDxãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç´¹ä»‹ -->
    <section class="section tedx-about">
      <div class="container">
        <h2 class="section-title">TEDxã¨ã„ã†ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã¤ã„ã¦</h2>
        <p class="section-description">
          TEDxã¯ã€ŒIdeas Worth Spreadingï¼ˆåºƒã‚ã‚‹ä¾¡å€¤ã®ã‚ã‚‹ã‚¢ã‚¤ãƒ‡ã‚¢ï¼‰ã€ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã®ä¸–ç•Œçš„ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚<br>
          TEDx Tsushima Youthã¯ã€ãã®ç†å¿µã®ã‚‚ã¨ã€åœ°åŸŸã®é«˜æ ¡ç”Ÿã‚„è‹¥è€…ãŒè‡ªã‚‰ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç™ºä¿¡ã™ã‚‹èˆå°ã‚’å‰µã‚Šã¾ã™ã€‚
        </p>
        <div class="canva-link">
          <a href="https://www.canva.com/design/DAGzreszYSA/5ha1spfaUzHONaJNiZfmRQ/view?utm_content=DAGzreszYSA&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=hc5848e9154" target="_blank" class="canva-button">
            è©³ç´°è³‡æ–™ã‚’è¦‹ã‚‹
          </a>
        </div>
      </div>
    </section>

    <!-- ã‚¹ãƒãƒ³ã‚µãƒ¼ã®æ„ç¾© -->
    <section class="section sponsor-purpose">
      <div class="container">
        <h2 class="section-title">ãªãœã‚¹ãƒãƒ³ã‚µãƒ¼ãŒå¿…è¦ãªã®ã‹</h2>
        <p class="section-description">
          TEDx Tsushima Youth ã§ã¯ã€å®Œå…¨éå–¶åˆ©ã§é‹å–¶ã•ã‚Œã¦ãŠã‚Šã€ã‚¹ã‚¿ãƒƒãƒ•ãƒ»ç™»å£‡è€…ã®æ´»å‹•ã‚‚ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢ã§ã™ã€‚<br>
          ãã®ãŸã‚ã€è£…é£¾ã‚„å‚åŠ è€…ç”¨ã‚°ãƒƒã‚ºã€ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ãªã©ã‚’æ”¯æ´ã—ã¦ãã ã•ã‚‹ã‚¹ãƒãƒ³ã‚µãƒ¼ã®å­˜åœ¨ãŒæ¬ ã‹ã›ã¾ã›ã‚“ã€‚<br>
          <strong>ã‚¹ãƒãƒ³ã‚µãƒ¼ã‚·ãƒƒãƒ—ã¯ã€Œæ”¯æ´ã€ã ã‘ã§ãªãã€ã€Œã¨ã‚‚ã«TEDxã‚’å‰µã‚‹ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—ã§ã™ã€‚</strong>
        </p>
      </div>
    </section>

    <!-- ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒ—ãƒ©ãƒ³ä¸€è¦§ -->
    <section class="section sponsor-plans" id="plans">
      <div class="container">
        <h2 class="section-title">SPONSOR PLAN</h2>
        <p class="section-subtitle">ã”å”è³›ãƒ—ãƒ©ãƒ³</p>

        <div class="plans-grid">
          <div class="plan-card">
            <div class="plan-icon">ğŸ¨</div>
            <h3 class="plan-title">ä¼šå ´è£…é£¾ãƒ»ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—è²»ç”¨æ”¯æ´</h3>
            <p class="plan-description">é«˜æ ¡ç”ŸãŒãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹ç©ºé–“ã‚’æ¼”å‡ºã™ã‚‹ãŸã‚ã®è£…é£¾ãƒ»æ¼”å‡ºè²»ç”¨</p>
            <p class="plan-price">25,000å††</p>
            <p class="plan-note">1å£</p>
          </div>

          <div class="plan-card">
            <div class="plan-icon">ğŸ½</div>
            <h3 class="plan-title">Speakerå‘ã‘ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼æ”¯æ´</h3>
            <p class="plan-description">ç™»å£‡è€…ã®ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼é£²é£Ÿè²»</p>
            <p class="plan-price">25,000å††</p>
            <p class="plan-note">æœ€å¤§2å£ã¾ã§</p>
          </div>

          <div class="plan-card">
            <div class="plan-icon">ğŸ’§</div>
            <h3 class="plan-title">Speaker / Audienceå‘ã‘é£²æ–™æ”¯æ´</h3>
            <p class="plan-description">ç´„200æœ¬ã®æ°´ã‚„ãŠèŒ¶ãªã©ã®è³¼å…¥è²»ç”¨</p>
            <p class="plan-price">25,000å††</p>
            <p class="plan-note">æœ€å¤§2å£ã¾ã§</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ã‚¹ãƒãƒ³ã‚µãƒ¼ç‰¹å…¸ -->
    <section class="section sponsor-benefits">
      <div class="container">
        <h2 class="section-title">SPONSOR BENEFITS</h2>
        <p class="section-subtitle">ã‚¹ãƒãƒ³ã‚µãƒ¼ç‰¹å…¸</p>

        <div class="benefits-grid">
          <div class="benefit-item">
            <div class="benefit-number">01</div>
            <p>2åã¾ã§ãƒˆãƒ¼ã‚¯ãƒ»ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã«ç„¡æ–™æ‹›å¾…</p>
          </div>
          <div class="benefit-item">
            <div class="benefit-number">02</div>
            <p>ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã«1åã‚ãŸã‚Š2,000å††ã§å‚åŠ å¯èƒ½</p>
          </div>
          <div class="benefit-item">
            <div class="benefit-number">03</div>
            <p>å„ç¨®SNSãƒ»å…¬å¼HPãƒ»ä¼šå ´å†…ã§ä¼æ¥­ãƒ­ã‚´ç­‰ã‚’PR</p>
          </div>
          <div class="benefit-item">
            <div class="benefit-number">04</div>
            <p>å²¡å±±ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ç©ºé–“æ¼”å‡ºãƒ»è£…é£¾ã«è²¢çŒ®å¯èƒ½</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Audienceãƒã‚±ãƒƒãƒˆæ¡ˆå†… -->
    <section class="section audience-ticket">
      <div class="container">
        <h2 class="section-title">AUDIENCE TICKET</h2>
        <p class="section-subtitle">å‚åŠ ãƒã‚±ãƒƒãƒˆ</p>

        <div class="ticket-info">
          <div class="ticket-item">
            <p class="ticket-label">talkï¼‹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—å‚åŠ </p>
            <p class="ticket-value">1,000å††</p>
          </div>
          <div class="ticket-item">
            <p class="ticket-label">ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼å‚åŠ </p>
            <p class="ticket-value">5,000å††<span class="ticket-note">ï¼ˆé«˜æ ¡ç”Ÿä»¥ä¸‹ç„¡æ–™ï¼‰</span></p>
          </div>
          <div class="ticket-item">
            <p class="ticket-label">æ”¯æ‰•æ–¹æ³•</p>
            <p class="ticket-value">å½“æ—¥ä¼šå ´æ”¯æ‰•ã„ï¼ˆãŠé‡£ã‚Šã®ãªã„ã‚ˆã†ã”å”åŠ›ãã ã•ã„ï¼‰</p>
          </div>
          <div class="ticket-item">
            <p class="ticket-label">ç”³ã—è¾¼ã¿ç· åˆ‡</p>
            <p class="ticket-value">12æœˆ12æ—¥ã¾ã§</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ç”³ã—è¾¼ã¿ãƒ•ã‚©ãƒ¼ãƒ  -->
    <section class="section sponsor-apply" id="apply">
      <div class="container">
        <h2 class="section-title">APPLY FOR SPONSOR</h2>
        <p class="section-subtitle">ã”æ”¯æ´ã®ãŠç”³ã—è¾¼ã¿</p>
        <p class="apply-deadline">ç”³è¾¼æœŸé™ï¼š2025å¹´11æœˆ20æ—¥ã¾ã§</p>

        <form class="sponsor-form" id="sponsorForm">
          <div class="form-group">
            <label for="name">æ°åã¾ãŸã¯æ³•äººå <span class="required">*</span></label>
            <input type="text" id="name" name="name" required>
          </div>

          <div class="form-group">
            <label for="contact-name">æ³•äººã®å ´åˆï¼šã”æ‹…å½“è€…å</label>
            <input type="text" id="contact-name" name="contact-name">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="required">*</span></label>
              <input type="email" id="email" name="email" required>
            </div>

            <div class="form-group">
              <label for="phone">é›»è©±ç•ªå· <span class="required">*</span></label>
              <input type="tel" id="phone" name="phone" required>
            </div>
          </div>

          <div class="form-group">
            <label>æ”¯æ´ãƒ—ãƒ©ãƒ³ã®é¸æŠ <span class="required">*</span></label>
            <p class="form-help">è¤‡æ•°ã®ãƒ—ãƒ©ãƒ³ã‚’é¸æŠã§ãã¾ã™ã€‚ãã‚Œãã‚Œã®å£æ•°ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>

            <div class="plan-selection">
              <div class="plan-option">
                <label class="checkbox-label">
                  <input type="checkbox" name="plan-decoration" id="plan-decoration" class="plan-checkbox">
                  <span>ğŸ¨ ä¼šå ´è£…é£¾ãƒ»ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—è²»ç”¨æ”¯æ´ï¼ˆ25,000å††/å£ï¼‰</span>
                </label>
                <div class="quantity-selector" id="quantity-decoration" style="display: none;">
                  <label for="quantity-decoration-input">å£æ•°ï¼š</label>
                  <input type="number" id="quantity-decoration-input" name="quantity-decoration" min="1" max="1" value="1" class="quantity-input">
                  <span class="quantity-note">æœ€å¤§1å£</span>
                </div>
              </div>

              <div class="plan-option">
                <label class="checkbox-label">
                  <input type="checkbox" name="plan-afterparty" id="plan-afterparty" class="plan-checkbox">
                  <span>ğŸ½ Speakerå‘ã‘ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼æ”¯æ´ï¼ˆ25,000å††/å£ï¼‰</span>
                </label>
                <div class="quantity-selector" id="quantity-afterparty" style="display: none;">
                  <label for="quantity-afterparty-input">å£æ•°ï¼š</label>
                  <input type="number" id="quantity-afterparty-input" name="quantity-afterparty" min="1" max="2" value="1" class="quantity-input">
                  <span class="quantity-note">æœ€å¤§2å£</span>
                </div>
              </div>

              <div class="plan-option">
                <label class="checkbox-label">
                  <input type="checkbox" name="plan-beverage" id="plan-beverage" class="plan-checkbox">
                  <span>ğŸ’§ Speaker / Audienceå‘ã‘é£²æ–™æ”¯æ´ï¼ˆ25,000å††/å£ï¼‰</span>
                </label>
                <div class="quantity-selector" id="quantity-beverage" style="display: none;">
                  <label for="quantity-beverage-input">å£æ•°ï¼š</label>
                  <input type="number" id="quantity-beverage-input" name="quantity-beverage" min="1" max="2" value="1" class="quantity-input">
                  <span class="quantity-note">æœ€å¤§2å£</span>
                </div>
              </div>
            </div>

            <div class="total-amount-display" id="totalAmountDisplay" style="display: none;">
              <div class="total-amount-label">åˆè¨ˆæ”¯æ´é‡‘é¡</div>
              <div class="total-amount-value" id="totalAmountValue">0å††</div>
            </div>
          </div>

          <div class="form-group">
            <label for="logo">PRç”¨ãƒ­ã‚´ã‚„ç´ æã®æå‡º</label>
            <textarea id="logo" name="logo" rows="2" placeholder="ãƒ­ã‚´ãƒ‡ãƒ¼ã‚¿ã®é€ä»˜æ–¹æ³•ã‚„ã€æ²è¼‰å¸Œæœ›ã®æƒ…å ±ã‚’ã”è¨˜å…¥ãã ã•ã„"></textarea>
          </div>

          <div class="form-section">
            <h3 class="form-section-title">å½“æ—¥æ¥å ´è€…æƒ…å ±</h3>

            <div class="form-group">
              <label for="visitor-name">æ°å <span class="required">*</span></label>
              <input type="text" id="visitor-name" name="visitor-name" required>
            </div>

            <div class="form-group">
              <label for="visitor-contact">é€£çµ¡å…ˆ <span class="required">*</span></label>
              <input type="text" id="visitor-contact" name="visitor-contact" required>
            </div>

            <div class="form-group">
              <label>ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼å‚åŠ æœ‰ç„¡ <span class="required">*</span></label>
              <div class="radio-group">
                <label class="radio-label">
                  <input type="radio" name="afterparty-attend" value="yes" required>
                  å‚åŠ ã™ã‚‹
                </label>
                <label class="radio-label">
                  <input type="radio" name="afterparty-attend" value="no" required>
                  å‚åŠ ã—ãªã„
                </label>
              </div>
            </div>

            <div class="form-group">
              <label for="allergies">é£Ÿç‰©ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ç­‰ã®ç‰¹è¨˜äº‹é …</label>
              <textarea id="allergies" name="allergies" rows="3" placeholder="ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã‚„é£Ÿäº‹åˆ¶é™ãªã©ãŒã‚ã‚Œã°ã”è¨˜å…¥ãã ã•ã„"></textarea>
            </div>
          </div>

          <button type="submit" class="submit-button">ã‚¹ãƒãƒ³ã‚µãƒ¼ç”³è¾¼ã‚’é€ä¿¡</button>
        </form>
      </div>
    </section>

    <!-- ãŠå•ã„åˆã‚ã› -->
    <section class="section sponsor-contact">
      <div class="container">
        <h2 class="section-title">CONTACT</h2>
        <p class="section-subtitle">ãŠå•ã„åˆã‚ã›</p>

        <div class="contact-info">
          <p><strong>å•ã„åˆã‚ã›å…ˆï¼š</strong>TEDx Tsushima Youth å®Ÿè¡Œå§”å“¡ä¼šï¼ˆå²¡å±±å¤§å­¦DSéƒ¨ï¼‰</p>
          <p><strong>é›»è©±ï¼š</strong><a href="tel:080-6305-4024">080-6305-4024</a></p>
          <p><strong>å…¬å¼ã‚µã‚¤ãƒˆï¼š</strong><a href="https://tedxhp.vercel.app/" target="_blank">https://tedxhp.vercel.app/</a></p>
        </div>
      </div>
    </section>
  </main>

  <Footer />
  <BottomNav />
</BaseLayout>

<script>
  import emailjs from '@emailjs/browser';

  // EmailJSè¨­å®šã‚’ç›´æ¥å–å¾—
  const config = {
    publicKey: import.meta.env.PUBLIC_EMAILJS_PUBLIC_KEY,
    serviceId: import.meta.env.PUBLIC_EMAILJS_SERVICE_ID,
    templateId: import.meta.env.PUBLIC_EMAILJS_TEMPLATE_ID,
    replyTemplateId: import.meta.env.PUBLIC_EMAILJS_REPLY_TEMPLATE_ID
  };

  // åˆè¨ˆé‡‘é¡ã‚’è¨ˆç®—ã—ã¦è¡¨ç¤ºã™ã‚‹é–¢æ•°
  function updateTotalAmount() {
    const checkedPlans = document.querySelectorAll('.plan-checkbox:checked');
    let totalAmount = 0;

    checkedPlans.forEach((checkbox) => {
      const input = checkbox as HTMLInputElement;
      const planType = input.id.replace('plan-', '');
      const quantityInput = document.getElementById(`quantity-${planType}-input`) as HTMLInputElement;
      const quantity = parseInt(quantityInput.value) || 0;
      totalAmount += quantity * 25000;
    });

    const totalAmountDisplay = document.getElementById('totalAmountDisplay');
    const totalAmountValue = document.getElementById('totalAmountValue');

    if (totalAmount > 0) {
      if (totalAmountDisplay) {
        totalAmountDisplay.style.display = 'block';
      }
      if (totalAmountValue) {
        totalAmountValue.textContent = `${totalAmount.toLocaleString()}å††`;
      }
    } else {
      if (totalAmountDisplay) {
        totalAmountDisplay.style.display = 'none';
      }
    }
  }

  // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¨å£æ•°é¸æŠã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
  const planCheckboxes = document.querySelectorAll('.plan-checkbox');
  planCheckboxes.forEach((checkbox) => {
    checkbox.addEventListener('change', function(e) {
      const target = e.target as HTMLInputElement;
      const planType = target.id.replace('plan-', '');
      const quantitySelector = document.getElementById(`quantity-${planType}`);
      const quantityInput = document.getElementById(`quantity-${planType}-input`) as HTMLInputElement;

      if (target.checked) {
        if (quantitySelector) {
          quantitySelector.style.display = 'flex';
        }
        if (quantityInput) {
          quantityInput.required = true;
        }
      } else {
        if (quantitySelector) {
          quantitySelector.style.display = 'none';
        }
        if (quantityInput) {
          quantityInput.required = false;
        }
      }

      // åˆè¨ˆé‡‘é¡ã‚’æ›´æ–°
      updateTotalAmount();
    });
  });

  // å£æ•°å…¥åŠ›ã®å¤‰æ›´æ™‚ã«ã‚‚åˆè¨ˆé‡‘é¡ã‚’æ›´æ–°
  const quantityInputs = document.querySelectorAll('.quantity-input');
  quantityInputs.forEach((input) => {
    input.addEventListener('input', updateTotalAmount);
    input.addEventListener('change', updateTotalAmount);
  });

  // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†
  document.getElementById('sponsorForm')?.addEventListener('submit', async function(e) {
    e.preventDefault();

    // å°‘ãªãã¨ã‚‚1ã¤ã®ãƒ—ãƒ©ãƒ³ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    const checkedPlans = document.querySelectorAll('.plan-checkbox:checked');
    if (checkedPlans.length === 0) {
      alert('å°‘ãªãã¨ã‚‚1ã¤ã®æ”¯æ´ãƒ—ãƒ©ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
      return;
    }

    // é€ä¿¡ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
    const submitButton = (e.target as HTMLFormElement).querySelector('button[type="submit"]') as HTMLButtonElement;
    const originalButtonText = submitButton.textContent;
    submitButton.disabled = true;
    submitButton.textContent = 'é€ä¿¡ä¸­...';

    // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®åé›†
    const formData = new FormData(e.target as HTMLFormElement);
    const data: any = {};

    // åŸºæœ¬æƒ…å ±
    data.name = formData.get('name');
    data.contactName = formData.get('contact-name');
    data.email = formData.get('email');
    data.phone = formData.get('phone');
    data.logo = formData.get('logo');

    // æ¥å ´è€…æƒ…å ±
    data.visitorName = formData.get('visitor-name');
    data.visitorContact = formData.get('visitor-contact');
    data.afterpartyAttend = formData.get('afterparty-attend');
    data.allergies = formData.get('allergies');

    // é¸æŠã•ã‚ŒãŸãƒ—ãƒ©ãƒ³ã¨å£æ•°
    data.plans = [];
    let totalAmount = 0;

    checkedPlans.forEach((checkbox) => {
      const input = checkbox as HTMLInputElement;
      const planType = input.id.replace('plan-', '');
      const quantityInput = document.getElementById(`quantity-${planType}-input`) as HTMLInputElement;
      const quantity = parseInt(quantityInput.value);
      const amount = quantity * 25000;

      const planNames: {[key: string]: string} = {
        'decoration': 'ğŸ¨ ä¼šå ´è£…é£¾ãƒ»ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—è²»ç”¨æ”¯æ´',
        'afterparty': 'ğŸ½ Speakerå‘ã‘ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼æ”¯æ´',
        'beverage': 'ğŸ’§ Speaker / Audienceå‘ã‘é£²æ–™æ”¯æ´'
      };

      data.plans.push({
        type: planType,
        name: planNames[planType],
        quantity: quantity,
        amount: amount
      });

      totalAmount += amount;
    });

    data.totalAmount = totalAmount;

    // EmailJSç”¨ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½œæˆ
    let plansDetail = '';
    data.plans.forEach((plan: any) => {
      plansDetail += `${plan.name}\n`;
      plansDetail += `  å£æ•°ï¼š${plan.quantity}å£\n`;
      plansDetail += `  é‡‘é¡ï¼š${plan.amount.toLocaleString()}å††\n\n`;
    });

    const emailParams = {
      name: data.name,
      contact_name: data.contactName || 'ãªã—',
      email: data.email,
      phone: data.phone,
      plans_detail: plansDetail.trim(),
      total_amount: data.totalAmount.toLocaleString(),
      logo: data.logo || 'ç‰¹ã«ãªã—',
      visitor_name: data.visitorName,
      visitor_contact: data.visitorContact,
      afterparty_attend: data.afterpartyAttend === 'yes' ? 'å‚åŠ ã™ã‚‹' : 'å‚åŠ ã—ãªã„',
      allergies: data.allergies || 'ç‰¹ã«ãªã—',
      submission_date: new Date().toLocaleString('ja-JP')
    };

    console.log('Form data:', data);
    console.log('Email params:', emailParams);

    try {
      // EmailJSã®è¨­å®šãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
      if (!config.publicKey || !config.serviceId || !config.templateId) {
        console.warn('EmailJS is not configured. Skipping email send.');
        alert(`ã‚¹ãƒãƒ³ã‚µãƒ¼ç”³ã—è¾¼ã¿ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚ï¼ˆé–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼‰\nåˆè¨ˆé‡‘é¡ï¼š${totalAmount.toLocaleString()}å††\n\nEmailJSè¨­å®šãŒå¿…è¦ã§ã™ã€‚.envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚`);
        submitButton.disabled = false;
        submitButton.textContent = originalButtonText;
        return;
      }

      // EmailJSã§å®Ÿè¡Œå§”å“¡ä¼šå®›ã«ãƒ¡ãƒ¼ãƒ«é€ä¿¡
      await emailjs.send(
        config.serviceId,
        config.templateId,
        emailParams,
        config.publicKey
      );

      // è‡ªå‹•è¿”ä¿¡ãƒ¡ãƒ¼ãƒ«ã‚‚é€ä¿¡ï¼ˆè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆï¼‰
      if (config.replyTemplateId) {
        try {
          await emailjs.send(
            config.serviceId,
            config.replyTemplateId,
            emailParams,
            config.publicKey
          );
        } catch (replyError) {
          console.error('Auto-reply email failed:', replyError);
          // è‡ªå‹•è¿”ä¿¡ã®å¤±æ•—ã¯è‡´å‘½çš„ã§ã¯ãªã„ã®ã§ç¶šè¡Œ
        }
      }

      // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
      alert(`ã‚¹ãƒãƒ³ã‚µãƒ¼ç”³ã—è¾¼ã¿ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚\n\nåˆè¨ˆé‡‘é¡ï¼š${totalAmount.toLocaleString()}å††\n\næ‹…å½“è€…ã‚ˆã‚Š2å–¶æ¥­æ—¥ä»¥å†…ã«ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚\nç¢ºèªãƒ¡ãƒ¼ãƒ«ã‚’ãŠé€ã‚Šã—ã¾ã—ãŸã®ã§ã”ç¢ºèªãã ã•ã„ã€‚`);

      // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
      (e.target as HTMLFormElement).reset();
      // å£æ•°é¸æŠæ¬„ã‚‚éè¡¨ç¤ºã«
      document.querySelectorAll('.quantity-selector').forEach(el => {
        (el as HTMLElement).style.display = 'none';
      });
      // åˆè¨ˆé‡‘é¡ã‚’ãƒªã‚»ãƒƒãƒˆ
      updateTotalAmount();
    } catch (error) {
      console.error('EmailJS Error:', error);
      alert('ç”³ã—è¾¼ã¿ã®é€ä¿¡ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚\nãŠæ‰‹æ•°ã§ã™ãŒã€ãŠé›»è©±ã«ã¦ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚\n\né›»è©±ï¼š080-6305-4024');
    } finally {
      // é€ä¿¡ãƒœã‚¿ãƒ³ã‚’å†åº¦æœ‰åŠ¹åŒ–
      submitButton.disabled = false;
      submitButton.textContent = originalButtonText;
    }
  });
</script>

<style>
  .sponsor-page {
    margin-top: 70px;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }

  /* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
  .sponsor-hero {
    background: linear-gradient(135deg, var(--tedx-red) 0%, #c41e1a 100%);
    color: white;
    padding: 80px 20px;
    text-align: center;
  }

  .hero-title {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    letter-spacing: 2px;
  }

  .hero-subtitle {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
  }

  .hero-theme {
    font-size: 1.2rem;
    font-style: italic;
    margin-bottom: 2rem;
    opacity: 0.9;
  }

  .hero-description {
    font-size: 1.1rem;
    line-height: 1.8;
    max-width: 800px;
    margin: 0 auto 2rem;
  }

  .cta-button {
    display: inline-block;
    background: white;
    color: var(--tedx-red);
    padding: 15px 40px;
    border-radius: 50px;
    text-decoration: none;
    font-weight: 700;
    font-size: 1.1rem;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }

  .cta-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  }

  /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
  .section {
    padding: 80px 20px;
  }

  .section:nth-child(even) {
    background: #f9f9f9;
  }

  .section-title {
    font-size: 2.5rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 0.5rem;
    color: var(--tedx-black);
  }

  .section-subtitle {
    font-size: 1.3rem;
    text-align: center;
    margin-bottom: 2rem;
    color: var(--tedx-red);
  }

  .section-description {
    font-size: 1.1rem;
    line-height: 1.8;
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
  }

  /* Canvaãƒªãƒ³ã‚¯ */
  .canva-link {
    text-align: center;
    margin-top: 2rem;
  }

  .canva-button {
    display: inline-block;
    background: var(--tedx-red);
    color: white;
    padding: 12px 30px;
    border-radius: 25px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .canva-button:hover {
    background: #c41e1a;
    transform: translateY(-2px);
  }

  /* ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒ—ãƒ©ãƒ³ */
  .plans-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
  }

  .plan-card {
    background: white;
    padding: 2rem;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    text-align: center;
    transition: all 0.3s ease;
  }

  .plan-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
  }

  .plan-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  .plan-title {
    font-size: 1.3rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: var(--tedx-black);
  }

  .plan-description {
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 1.5rem;
    color: #666;
  }

  .plan-price {
    font-size: 2rem;
    font-weight: 700;
    color: var(--tedx-red);
    margin-bottom: 0.5rem;
  }

  .plan-note {
    font-size: 0.9rem;
    color: #999;
  }

  /* ã‚¹ãƒãƒ³ã‚µãƒ¼ç‰¹å…¸ */
  .benefits-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
  }

  .benefit-item {
    background: white;
    padding: 1.5rem;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    text-align: center;
  }

  .benefit-number {
    font-size: 2rem;
    font-weight: 700;
    color: var(--tedx-red);
    margin-bottom: 1rem;
  }

  .benefit-item p {
    font-size: 1rem;
    line-height: 1.6;
  }

  /* ãƒã‚±ãƒƒãƒˆæƒ…å ± */
  .ticket-info {
    max-width: 600px;
    margin: 2rem auto;
  }

  .ticket-item {
    display: flex;
    justify-content: space-between;
    padding: 1rem;
    border-bottom: 1px solid #ddd;
  }

  .ticket-item:last-child {
    border-bottom: none;
  }

  .ticket-label {
    font-weight: 600;
  }

  .ticket-value {
    text-align: right;
  }

  .ticket-note {
    font-size: 0.9rem;
    color: #666;
  }

  /* ç”³ã—è¾¼ã¿ãƒ•ã‚©ãƒ¼ãƒ  */
  .apply-deadline {
    text-align: center;
    font-size: 1.1rem;
    color: var(--tedx-red);
    font-weight: 600;
    margin-bottom: 2rem;
  }

  .sponsor-form {
    max-width: 700px;
    margin: 0 auto;
    background: white;
    padding: 2rem;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }

  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: var(--tedx-black);
  }

  .required {
    color: var(--tedx-red);
  }

  .form-help {
    font-size: 0.9rem;
    color: #666;
    margin-bottom: 1rem;
  }

  .form-group input,
  .form-group select,
  .form-group textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 1rem;
    transition: border-color 0.3s ease;
  }

  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: var(--tedx-red);
  }

  /* ãƒ—ãƒ©ãƒ³é¸æŠ */
  .plan-selection {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .plan-option {
    border: 2px solid #eee;
    border-radius: 8px;
    padding: 1rem;
    transition: all 0.3s ease;
  }

  .plan-option:has(.plan-checkbox:checked) {
    border-color: var(--tedx-red);
    background: #fff5f5;
  }

  .checkbox-label {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    cursor: pointer;
    font-weight: normal;
    margin-bottom: 0;
  }

  .checkbox-label input[type="checkbox"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
  }

  .checkbox-label span {
    font-size: 1rem;
    font-weight: 500;
  }

  .quantity-selector {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 1rem;
    padding-left: 2rem;
  }

  .quantity-selector label {
    margin-bottom: 0;
    font-weight: 500;
  }

  .quantity-input {
    width: 80px !important;
    padding: 8px !important;
  }

  .quantity-note {
    font-size: 0.85rem;
    color: #666;
  }

  /* åˆè¨ˆé‡‘é¡è¡¨ç¤º */
  .total-amount-display {
    margin-top: 2rem;
    padding: 1.5rem;
    background: linear-gradient(135deg, #fff5f5 0%, #ffe8e8 100%);
    border: 2px solid var(--tedx-red);
    border-radius: 10px;
    text-align: center;
  }

  .total-amount-label {
    font-size: 1rem;
    font-weight: 600;
    color: var(--tedx-black);
    margin-bottom: 0.5rem;
  }

  .total-amount-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--tedx-red);
  }

  .form-section {
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 2px solid #eee;
  }

  .form-section-title {
    font-size: 1.3rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    color: var(--tedx-black);
  }

  .radio-group {
    display: flex;
    gap: 2rem;
  }

  .radio-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: normal;
    cursor: pointer;
  }

  .submit-button {
    width: 100%;
    background: var(--tedx-red);
    color: white;
    padding: 15px;
    border: none;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 1rem;
  }

  .submit-button:hover {
    background: #c41e1a;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }

  /* ãŠå•ã„åˆã‚ã› */
  .contact-info {
    text-align: center;
    font-size: 1.1rem;
    line-height: 2;
  }

  .contact-info a {
    color: var(--tedx-red);
    text-decoration: none;
  }

  .contact-info a:hover {
    text-decoration: underline;
  }

  /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
  @media (max-width: 768px) {
    .sponsor-page {
      margin-top: 60px;
    }

    .hero-title {
      font-size: 2rem;
    }

    .hero-subtitle {
      font-size: 1.2rem;
    }

    .section-title {
      font-size: 1.8rem;
    }

    .plans-grid,
    .benefits-grid {
      grid-template-columns: 1fr;
    }

    .form-row {
      grid-template-columns: 1fr;
    }

    .radio-group {
      flex-direction: column;
      gap: 1rem;
    }
  }
</style>
